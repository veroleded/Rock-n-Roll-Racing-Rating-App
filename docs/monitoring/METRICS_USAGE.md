# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç—Ä–∞—Ñ–∏–∫–∞

## –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Prometheus –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫. –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ endpoint `/api/metrics`.

### HTTP –º–µ—Ç—Ä–∏–∫–∏

- `http_requests_total` - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ (–º–µ—Ç–æ–¥, –º–∞—Ä—à—Ä—É—Ç, —Å—Ç–∞—Ç—É—Å)
- `http_request_duration_seconds` - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
- `http_request_size_bytes` - –†–∞–∑–º–µ—Ä HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –±–∞–π—Ç–∞—Ö
- `http_response_size_bytes` - –†–∞–∑–º–µ—Ä HTTP –æ—Ç–≤–µ—Ç–æ–≤ –≤ –±–∞–π—Ç–∞—Ö

### –°–µ—Ç–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- `network_bytes_out_total` - –û–±—â–∏–π –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ (–±–∞–π—Ç—ã)
- `network_bytes_in_total` - –û–±—â–∏–π –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ (–±–∞–π—Ç—ã)

### Redis –º–µ—Ç—Ä–∏–∫–∏

- `redis_operations_total` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π Redis (–æ–ø–µ—Ä–∞—Ü–∏—è, —Å—Ç–∞—Ç—É—Å)
- `redis_subscriptions_active` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ Redis

### Discord –º–µ—Ç—Ä–∏–∫–∏

- `discord_events_total` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π Discord (—Ç–∏–ø —Å–æ–±—ã—Ç–∏—è)
- `discord_reconnects_total` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Discord

### –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

- `active_connections` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫

### –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/api/metrics` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Prometheus.

### –ß–µ—Ä–µ–∑ curl

```bash
curl http://localhost:3000/api/metrics
```

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

```bash
# –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:3000/api/metrics

# –¢–æ–ª—å–∫–æ HTTP –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:3000/api/metrics | grep http_

# –¢–æ–ª—å–∫–æ —Å–µ—Ç–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:3000/api/metrics | grep network_

# –¢–æ–ª—å–∫–æ Redis –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:3000/api/metrics | grep redis_
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
curl http://localhost:3000/api/metrics | grep network_bytes_out_total
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
curl http://localhost:3000/api/metrics | grep network_bytes_in_total
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ Redis

```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫
curl http://localhost:3000/api/metrics | grep redis_subscriptions_active
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π Discord

```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
curl http://localhost:3000/api/metrics | grep discord_reconnects_total
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Prometheus, –¥–æ–±–∞–≤—å—Ç–µ –≤ `prometheus.yml`:

```yaml
scrape_configs:
  - job_name: 'rnr-racing'
    scrape_interval: 15s
    static_configs:
      - targets: ['localhost:3000']
        metrics_path: '/api/metrics'
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grafana

–°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ –≤ Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫:

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Prometheus –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–Ω–µ–ª–∏ –¥–ª—è:
   - –ò—Å—Ö–æ–¥—è—â–∏–π/–≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ (–≥—Ä–∞—Ñ–∏–∫)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ (–≥—Ä–∞—Ñ–∏–∫)
   - –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤ (–≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞)
   - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ Redis (gauge)
   - –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Discord (—Å—á–µ—Ç—á–∏–∫)

## –ê–ª–µ—Ä—Ç—ã

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ Prometheus –¥–ª—è:

- –í—ã—Å–æ–∫–∏–π –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ (> 1GB/—á–∞—Å)
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Discord (> 5 –∑–∞ —á–∞—Å)
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ Redis (> 10)
- –í—ã—Å–æ–∫–∏–π —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤ (> 10MB)

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ PromQL

```promql
# –ò—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
rate(network_bytes_out_total[1h]) * 3600

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
rate(http_requests_total[5m])

# –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞
rate(http_response_size_bytes_sum[5m]) / rate(http_response_size_bytes_count[5m])

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ Redis
redis_subscriptions_active
```

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º:

```bash
# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose (–±–µ–∑ Nginx)
docker-compose -f docker-compose.local.yml up

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:3000
# –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ http://localhost:3000/api/metrics
```

## –ë—ã—Å—Ç—Ä—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞

### –†–∞–∑–æ–≤—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞
./scripts/monitoring/monitor-traffic.sh

# –î–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
./scripts/monitoring/monitor-traffic.sh http://your-server:3000/api/metrics
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:

- üìä –ò—Å—Ö–æ–¥—è—â–∏–π –∏ –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ (–≤ GB/MB/KB)
- üìà –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- üî¥ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ Redis
- ü§ñ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π Discord
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –≤—ã—Å–æ–∫–æ–º —Ç—Ä–∞—Ñ–∏–∫–µ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
./scripts/monitoring/monitor-traffic-continuous.sh

# –° –∫–∞—Å—Ç–æ–º–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥)
./scripts/monitoring/monitor-traffic-continuous.sh http://localhost:3000/api/metrics 10

# –î–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
./scripts/monitoring/monitor-traffic-continuous.sh http://your-server:3000/api/metrics 30
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

- –¢–µ–∫—É—â–∏–π –∏—Å—Ö–æ–¥—è—â–∏–π/–≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
- –°–∫–æ—Ä–æ—Å—Ç—å —Ç—Ä–∞—Ñ–∏–∫–∞ (–±–∞–π—Ç/—Å–µ–∫)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å–æ–∫ Redis
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π Discord
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –≤—ã—Å–æ–∫–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã—Å–æ–∫–∏–π –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ (> 1 GB):

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å–æ–∫ Redis:**

   ```bash
   ./scripts/monitoring/monitor-traffic.sh | grep "Redis"
   ```

   –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–æ–∫ –±–æ–ª—å—à–µ 5, –≤–æ–∑–º–æ–∂–Ω–∞ —É—Ç–µ—á–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫.

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Discord:**

   ```bash
   ./scripts/monitoring/monitor-traffic.sh | grep "Discord"
   ```

   –ï—Å–ª–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –º–Ω–æ–≥–æ, –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º.

3. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**

   ```bash
   docker-compose -f docker-compose.local.yml down
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**

   ```bash
   docker-compose -f docker-compose.local.yml logs --tail=100
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:**
   –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/api/metrics` –∏ –Ω–∞–π–¥–∏—Ç–µ:
   - `network_bytes_out_total` - –æ–±—â–∏–π –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
   - `http_response_size_bytes` - —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤
   - `redis_subscriptions_active` - –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏

## –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

–ú–µ—Ç—Ä–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç.

### –ì–¥–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∏

- **–§–∞–π–ª:** `logs/metrics/metrics.jsonl` (—Ñ–æ—Ä–º–∞—Ç JSON Lines)
- **–§–æ—Ä–º–∞—Ç:** –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ - –æ—Ç–¥–µ–ª—å–Ω—ã–π JSON –æ–±—ä–µ–∫—Ç —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
  - –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ (timestamp)
  - –ò—Å—Ö–æ–¥—è—â–∏–π/–≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å–æ–∫ Redis
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π Discord
  - –ü–æ–ª–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Prometheus (rawMetrics)

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –º–µ—Ç—Ä–∏–∫

#### –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:

```bash
./scripts/monitoring/view-metrics-history.sh
```

#### –ß–µ—Ä–µ–∑ API:

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 20 –∑–∞–ø–∏—Å–µ–π
curl http://localhost:3000/api/metrics/history?limit=20

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥
curl http://localhost:3000/api/metrics/history?stats=true

# –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
curl "http://localhost:3000/api/metrics/history?startDate=2025-12-28T00:00:00Z&endDate=2025-12-28T23:59:59Z"
```

#### –ü—Ä—è–º–æ–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π
tail -n 20 logs/metrics/metrics.jsonl

# –ü–æ–∏—Å–∫ –∑–∞–ø–∏—Å–µ–π —Å –≤—ã—Å–æ–∫–∏–º —Ç—Ä–∞—Ñ–∏–∫–æ–º (> 1 GB)
cat logs/metrics/metrics.jsonl | jq 'select(.networkBytesOut > 1073741824)'

# –ü–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –∑–∞ –¥–µ–Ω—å
cat logs/metrics/metrics.jsonl | jq -s 'map(.networkBytesOut) | add'
```

### –í–∞–∂–Ω–æ

- –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è, –Ω–æ –∏—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ
- –§–∞–π–ª `logs/metrics/metrics.jsonl` –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ endpoint: `curl http://localhost:3000/api/metrics`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `prom-client` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `npm list prom-client`
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `logs/metrics/metrics.jsonl` —Å–æ–∑–¥–∞–µ—Ç—Å—è (–¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞)

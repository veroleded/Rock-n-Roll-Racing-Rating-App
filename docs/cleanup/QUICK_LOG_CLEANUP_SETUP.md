# Быстрая настройка очистки логов

## Автоматическая настройка (1 команда)

```bash
sudo ./scripts/setup-log-cleanup-cron.sh
```

Это настроит:
- ✅ Очистку логов метрик каждый день в 2:00 (хранит 30 дней)
- ✅ Очистку всех логов каждую неделю в воскресенье в 3:00
- ✅ Автоматическое архивирование старых записей

## Что будет очищаться

### Ежедневно (2:00)
- Логи метрик старше 30 дней
- Старые архивы метрик (старше 90 дней)

### Еженедельно (воскресенье, 3:00)
- Все логи приложения старше 30 дней
- Временные файлы
- Старые архивы

## Ручной запуск

```bash
# Очистить только логи метрик (оставить 30 дней)
./scripts/cleanup-metrics-logs.sh 30

# Очистить все логи
./scripts/cleanup-all-logs.sh
```

## Проверка работы

```bash
# Просмотр cron задач
crontab -l

# Просмотр логов очистки
tail -f logs/cleanup.log

# Проверка размера логов
du -sh logs/
```

## Изменение настроек

### Изменить период хранения

```bash
crontab -e
# Измените число дней в команде:
# Было: cleanup-metrics-logs.sh 30
# Стало: cleanup-metrics-logs.sh 60
```

### Изменить расписание

```bash
crontab -e
# Формат: минута час день месяц день_недели
# Примеры:
# 0 3 * * *     - каждый день в 3:00
# 0 2 * * 0     - каждое воскресенье в 2:00
# 0 1 */3 * *   - каждые 3 дня в 1:00
```

## Дополнительная информация

Подробная документация: [LOG_CLEANUP.md](./LOG_CLEANUP.md)

